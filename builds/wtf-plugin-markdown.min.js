!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(n=n||self).wtfMarkdown=t()}(this,(function(){"use strict";var n={redirects:!0,infoboxes:!0,templates:!0,sections:!0},t=function(t){t=Object.assign({},n,t);var e,i,r=this.data,a="";return!0===t.redirects&&!0===this.isRedirect()?(e=this.redirectTo(),i="./"+(i=e.page).replace(/ /g,"_"),e.anchor&&(i+="#"+e.anchor),"â†³ [".concat(e.text,"](").concat(i,")")):(!0===t.infoboxes&&!0===t.templates&&(a+=this.infoboxes().map((function(n){return n.markdown(t)})).join("\n\n")),!0!==t.sections&&!0!==t.paragraphs&&!0!==t.sentences||(a+=r.sections.map((function(n){return n.markdown(t)})).join("\n\n")),!0===t.citations&&(a+="## References",a+=this.citations().map((function(n){return n.json(t)})).join("\n")),a)},e={headers:!0,images:!0,tables:!0,lists:!0,paragraphs:!0},i=function(n){var t="";if(!0===(n=Object.assign({},e,n)).headers&&this.title()){for(var i="##",r=0;r<this.depth;r+=1)i+="#";t+=i+" "+this.title()+"\n"}if(!0===n.images){var a=this.images();a.length>0&&(t+=a.map((function(n){return n.markdown()})).join("\n"),t+="\n")}if(!0===n.tables){var s=this.tables();s.length>0&&(t+="\n",t+=s.map((function(t){return t.markdown(n)})).join("\n"),t+="\n")}if(!0===n.lists){var o=this.lists();o.length>0&&(t+=o.map((function(t){return t.markdown(n)})).join("\n"),t+="\n")}return!0!==n.paragraphs&&!0!==n.sentences||(t+=this.paragraphs().map((function(t){return t.sentences().map((function(t){return t.markdown(n)})).join(" ")})).join("\n\n")),t},r={sentences:!0},a=function(n){var t="";return!0===(n=Object.assign({},r,n)).sentences&&(t+=this.sentences().reduce((function(t,e){return t+=e.markdown(n)+"\n"}),{})),t};var s=function(n,t,e){if(!t||!n)return n;"number"==typeof n&&(n=String(n)),t=t.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var i=new RegExp("\\b"+t+"\\b");return n=!0===i.test(n)?n.replace(i,e):n.replace(t,e)},o={links:!0,formatting:!0},c=function(n){n=Object.assign({},o,n);var t=this.text();return!0===n.links&&this.links().forEach((function(n){var e=n.markdown(),i=n.text||n.page;t=s(t,i,e)})),!0===n.formatting&&(this.bold().forEach((function(n){t=s(t,n,"**"+n+"**")})),this.italic().forEach((function(n){t=s(t,n,"*"+n+"*")}))),t},f={image:!0,caption:!0,alt:!0,signature:!0,"signature alt":!0},u=function(n,t){n=n||"";var e=(t=t||15)-(n=String(n)).length;e=Math.ceil(e/2);for(var i=0;i<e;i+=1)(n=" "+n).length<t&&(n+=" ");return n},h={images:!0},p=function(n){var t=this;n=Object.assign({},h,n);var e="|"+u("",35)+"|"+u("",30)+"|\n";return e+="|"+u("---",35)+"|"+u("---",30)+"|\n",Object.keys(this.data).forEach((function(i){if(!0!==f[i]){var r="**"+i+"**",a=t.data[i].markdown(n);a=a.split(/\n/g).join(", "),e+="|"+u(r,35)+"|"+u(a,30)+" |\n"}})),e},g=function(){var n=this.data.file.replace(/^(file|image):/i,"");return"!["+(n=n.replace(/\.(jpg|jpeg|png|gif|svg)/i,""))+"]("+this.thumbnail()+")"};return function(n){n.Doc.markdown=t,n.Section.markdown=i,n.Paragraph.markdown=a,n.Sentence.markdown=c,n.Image.markdown=g,n.Infobox.markdown=p}}));
